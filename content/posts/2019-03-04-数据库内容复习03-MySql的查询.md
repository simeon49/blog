+++
title = "数据库内容复习03-MySql的查询"
description = "数据库内容复习03-MySql的查询"
tags = [
    "数据库", "SQL", "MySql", "数据库查询"
]
date = "2019-03-04"
categories = [
    "数据库",
]
menu = "main"
+++

复习数据库方面的内容, 以下为笔记内容, 参考了...(未完成...)


### 条件查询

```SQL
SELECT * FROM <表名> WHERE <条件表达式>
```

常用的条件表达式:

| 条件 | 说明 |	表达式举例 |
|:----:|:--------:|:-----:|
| = | 判断相等 | score = 80 name = 'abc'	字符串需要用单引号括起来 |
| > | 判断大于 |	score > 80 	name > 'abc' 	字符串比较根据ASCII码，中文字符比较根据数据库设置 |
| >=| 判断大于或相等 |	score >= 80 	name >= 'abc' 	|
| < | 判断小于 |	score < 80 	name <= 'abc' 	|
| <=| 判断小于或相等 |	score <= 80 	name <= 'abc' 	|
| <> 也可以用 != | 判断不相等(!= 在MySQL中可以使用 不过不是标准的SQL) |	score <> 80 	name <> 'abc' 	|
| LIKE | 判断相似 |	name LIKE 'ab%' 	name LIKE '%bc%' 	%表示任意字符，例如'ab%'将匹配'ab'，'abc'，'abcd'|

#### 基本实例:
```SQL
-- 查询分数在60分(含)～90分(含)之间的学生可以使用的WHERE语句：
SELECT * FROM students WHERE score >= 60 OR score <= 90;
-- 或者
SELECT * FROM students WHERE score BETWEEN 60 and 90;

-- 指定查询列
SELECT id, name, score from students WHERE SCORE < 60;

-- 排序
select * from students ORDER BY score;  -- 升序 "ASC"
select * from students ORDER BY score DESC; -- 倒序
select * from students ORDER BY score DESC, gender; -- 先按score倒序排, 如果有相同的score 按 gender 升序排

-- 分页
select * from students ORDER BY score LIMIT 10 OFFSET 0;  -- 每页10条数据, 查询第一页
select * from students ORDER BY score LIMIT 10 OFFSET 10;  -- 每页10条数据, 查询第二页
select * from students ORDER BY score LIMIT 10 OFFSET 20;  -- 每页10条数据, 查询第三页
-- 备注: 在MySQL中，LIMIT 15 OFFSET 30还可以简写成LIMIT 30, 15
```

#### 聚合查询

聚合函数:

| 函数 |	说明 |
|:---:|:-------:|
| SUM |计算某一列的合计值，该列必须为数值类型 |
| AVG |计算某一列的平均值，该列必须为数值类型 |
| MAX |计算某一列的最大值 (如果是字符类型，MAX()和MIN()会返回排序最后和排序最前的字符。)|
| MIN |计算某一列的最小值 (如果是字符类型，MAX()和MIN()会返回排序最后和排序最前的字符。)|

```SQL
-- 查询students表一共有多少条记录为例
select COUNT(*) from students;
-- +----------+
-- | count(*) |
-- +----------+
-- | 3        |
-- +----------+

-- 使用别名
select COUNT(*) as total from students;
-- +-------+
-- | total |
-- +-------+
-- | 3     |
-- +-------+

-- 计算平均值
select AVG(score) as average from students;

-- 获得总页数(每页10条数据)
select CEILING(COUNT(*)/10) from students;
```


#### 分组查询

```SQL
-- 统计每一班学生的总数
SELECT class_id, COUNT(*) as total FROM students GROUP BY class_id;
```
